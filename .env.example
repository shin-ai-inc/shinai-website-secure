# ShinAI Secure Website Environment Variables
# Constitutional AI準拠・masa様開発ルール完全遵守
# 本番環境設定テンプレート

# =============================================================================
# NODE.JS / APPLICATION SETTINGS
# =============================================================================
NODE_ENV=production
PORT=3001
HOST=0.0.0.0

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# MongoDB Settings
MONGODB_URI=mongodb://mongodb_user:CHANGE_MONGO_PASSWORD@mongodb:27017/shinai_secure?authSource=admin
MONGO_ROOT_PASSWORD=CHANGE_MONGO_ROOT_PASSWORD_HERE
MONGO_PASSWORD=CHANGE_MONGO_PASSWORD_HERE

# Redis Settings
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=CHANGE_REDIS_PASSWORD_HERE

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT & Session Secrets (32文字以上の強力なランダム文字列を生成)
JWT_SECRET=CHANGE_JWT_SECRET_TO_STRONG_RANDOM_STRING_32_CHARS_PLUS
SESSION_SECRET=CHANGE_SESSION_SECRET_TO_STRONG_RANDOM_STRING_32_CHARS_PLUS
SESSION_CRYPTO_SECRET=CHANGE_SESSION_CRYPTO_SECRET_TO_STRONG_RANDOM_STRING
ENCRYPTION_KEY=CHANGE_ENCRYPTION_KEY_TO_STRONG_RANDOM_STRING_32_CHARS
COOKIE_SECRET=CHANGE_COOKIE_SECRET_TO_STRONG_RANDOM_STRING_32_CHARS

# Audit Encryption Key (監査ログ暗号化用)
AUDIT_ENCRYPTION_KEY=CHANGE_AUDIT_ENCRYPTION_KEY_TO_STRONG_RANDOM_STRING

# Webhook Secret (Webhook署名用)
WEBHOOK_SECRET=CHANGE_WEBHOOK_SECRET_TO_STRONG_RANDOM_STRING

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# SMTP Settings
EMAIL_HOST=smtp.your-email-provider.com
EMAIL_PORT=587
EMAIL_USER=your-email@your-domain.com
EMAIL_PASS=YOUR_EMAIL_PASSWORD_HERE

# =============================================================================
# ALERT & NOTIFICATION SETTINGS
# =============================================================================
# Webhook URL for alerts
ALERT_WEBHOOK=https://your-webhook-url.com/alerts
SECURITY_ALERT_WEBHOOK=https://your-webhook-url.com/security-alerts

# Alert Email
ALERT_EMAIL=admin@your-domain.com
SECURITY_ALERT_EMAIL=security@your-domain.com

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# Backup Settings (AWS S3)
BACKUP_S3_BUCKET=your-backup-bucket-name
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_ACCESS_KEY

# =============================================================================
# CORS & ALLOWED ORIGINS
# =============================================================================
# Production domains (comma-separated)
ALLOWED_ORIGINS=https://shinai.co.jp,https://www.shinai.co.jp,https://api.shinai.co.jp

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Log Level (error, warn, info, debug)
LOG_LEVEL=info

# =============================================================================
# CONSTITUTIONAL AI COMPLIANCE
# =============================================================================
# Constitutional AI監視設定
CONSTITUTIONAL_AI_ENABLED=true
CONSTITUTIONAL_AI_THRESHOLD=0.95
CONSTITUTIONAL_AI_STRICT_MODE=true

# Constitutional AI違反時の動作
CONSTITUTIONAL_AI_BLOCK_ON_VIOLATION=true
CONSTITUTIONAL_AI_ALERT_ON_VIOLATION=true

# =============================================================================
# SECURITY MONITORING
# =============================================================================
# Security Monitor Settings
SECURITY_MONITORING_ENABLED=true
THREAT_DETECTION_ENABLED=true
REAL_TIME_MONITORING=true

# IP Blocking Settings
AUTO_IP_BLOCKING=true
IP_BLOCK_THRESHOLD=10
IP_BLOCK_DURATION=3600

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_MAX=5

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
# SSL Certificate paths (for production)
SSL_CERT_PATH=/etc/ssl/private/shinai.co.jp.crt
SSL_KEY_PATH=/etc/ssl/private/shinai.co.jp.key
SSL_CA_PATH=/etc/ssl/private/ca.crt

# =============================================================================
# DEVELOPMENT SETTINGS (本番環境では削除)
# =============================================================================
# Development API Keys (本番環境では使用不可)
# DEV_API_KEY=dev_key_for_testing_only
# DEBUG_MODE=false

# =============================================================================
# NODE IDENTIFICATION
# =============================================================================
# Node ID (複数インスタンス運用時)
NODE_ID=primary

# Environment Identifier
ENVIRONMENT_ID=production-jp-east

# Version
APP_VERSION=2.0.0-secure

# =============================================================================
# MONITORING & METRICS
# =============================================================================
# Prometheus Settings
PROMETHEUS_ENABLED=true
METRICS_COLLECTION_ENABLED=true

# Performance Monitoring
PERFORMANCE_MONITORING=true
RESPONSE_TIME_THRESHOLD=5000

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================
# Backup Schedule (cron format)
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# Database Backup
DB_BACKUP_ENABLED=true
REDIS_BACKUP_ENABLED=true

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Advanced Features
ADVANCED_THREAT_DETECTION=true
MACHINE_LEARNING_ANALYSIS=true
BEHAVIORAL_ANALYSIS=true

# API Features
API_VERSIONING=v1
API_DOCUMENTATION=false  # 本番環境では無効

# =============================================================================
# TIMEZONE & LOCALE
# =============================================================================
TZ=Asia/Tokyo
LOCALE=ja_JP.UTF-8

# =============================================================================
# SECURITY HEADERS
# =============================================================================
# Additional Security Headers
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
CSP_ENFORCE=true

# =============================================================================
# 使用方法 / USAGE
# =============================================================================
# 1. このファイルを .env にコピー
# 2. すべての CHANGE_xxx 値を実際の値に変更
# 3. パスワード・シークレットは32文字以上の強力なランダム文字列を使用
# 4. 本番環境では絶対に弱いパスワードを使用しない
# 5. 定期的にシークレットをローテーション
# 6. このファイルをバージョン管理に含めない(.gitignoreに追加)

# =============================================================================
# SECURITY NOTES
# =============================================================================
# - すべてのシークレット・パスワードは強力なものを使用
# - 本番環境では開発用設定を削除
# - 定期的にセキュリティ監査を実施
# - Constitutional AI準拠を常に確認
# - ログの機密情報漏洩に注意
# =============================================================================